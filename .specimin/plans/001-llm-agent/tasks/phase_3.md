# Phase 3: Integration & Polish

**Dependencies**: Phase 2 complete
**Parallel Opportunities**: 2

- [ ] T038 Write test for path traversal rejection in tests/test_agent.py (R03, R04)
- [ ] T039 Run test and confirm RED
- [ ] T040 Add path traversal validation to file tools in src/carta/agent.py (R03, R04)
- [ ] T041 Run test and confirm GREEN
- [ ] T042 Write test for disallowed shell command rejection in tests/test_agent.py (R05)
- [ ] T043 Run test and confirm RED
- [ ] T044 Add disallowed command error handling in src/carta/agent.py (R05)
- [ ] T045 Run test and confirm GREEN
- [ ] T046 [P] Write test for token usage logging in tests/test_agent.py (R09)
- [ ] T047 [P] Write test for cost estimate in response in tests/test_agent.py (R06)
- [ ] T048 Run tests and confirm RED
- [ ] T049 Implement token/cost logging and response fields in src/carta/agent.py (R06, R09)
- [ ] T050 Run tests and confirm GREEN
- [ ] T051 Write test for network timeout handling in tests/test_agent.py (R07)
- [ ] T052 Run test and confirm RED
- [ ] T053 Add timeout configuration and error handling in src/carta/agent.py (R07)
- [ ] T054 Run test and confirm GREEN
